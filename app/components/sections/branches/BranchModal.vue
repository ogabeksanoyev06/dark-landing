<template>
	<Modal v-model="value">
		<div class="flex flex-col gap-3 p-4">
			<div class="flex items-center justify-between">
				<h3 class="text-lg font-semibold font-adero-trial">{{ branch?.name }}</h3>
			</div>
			<div class="flex flex-col items-start gap-3">
				<a :href="mapLink" target="_blank" class="flex items-center gap-1 group">
					<NuxtImg src="/images/location.svg" alt="location icon" class="size-5 shrink-0" />
					<span class="text-base !leading-130 transition-300 group-hover:text-red">{{ branch?.address }}</span>
				</a>
				<a
					:href="mapLink"
					target="_blank"
					class="w-full h-[160px] rounded-[20px] overflow-hidden relative bg-no-repeat bg-center bg-cover"
					:style="`background-image: url('https://static-maps.yandex.ru/1.x/?lang=ru-RU&ll=${branch.longitude},${branch.latitude}&z=14&l=map')`"
				>
					<svg class="absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-full" xmlns="http://www.w3.org/2000/svg" width="46" height="59" viewBox="0 0 46 59" fill="none">
						<ellipse opacity="0.16" cx="22.9404" cy="56.0532" rx="8" ry="2" fill="#020D17" />
						<mask id="path-2-inside-1_1644_647" fill="white">
							<path
								d="M22.999 0C35.7015 0 45.999 10.1765 45.999 22.7295C45.9989 32.3145 39.9949 40.5122 31.501 43.8535L24.7109 55.0391C23.9321 56.3218 22.0698 56.3218 21.291 55.0391L14.501 43.8555C6.00529 40.515 0.000108342 32.3157 0 22.7295C0 10.1766 10.2967 0.00021597 22.999 0Z"
							/>
						</mask>
						<path
							d="M22.999 0C35.7015 0 45.999 10.1765 45.999 22.7295C45.9989 32.3145 39.9949 40.5122 31.501 43.8535L24.7109 55.0391C23.9321 56.3218 22.0698 56.3218 21.291 55.0391L14.501 43.8555C6.00529 40.515 0.000108342 32.3157 0 22.7295C0 10.1766 10.2967 0.00021597 22.999 0Z"
							fill="#020D17"
						/>
						<path
							d="M22.999 0L22.999 -2L22.999 -2L22.999 0ZM45.999 22.7295L47.999 22.7295V22.7295H45.999ZM31.501 43.8535L30.7688 41.9923L30.1413 42.2392L29.7913 42.8157L31.501 43.8535ZM24.7109 55.0391L26.4205 56.077L26.4206 56.0769L24.7109 55.0391ZM21.291 55.0391L19.5814 56.077L19.5814 56.077L21.291 55.0391ZM14.501 43.8555L16.2106 42.8175L15.8605 42.241L15.2328 41.9942L14.501 43.8555ZM0 22.7295L-2 22.7295L-2 22.7295L0 22.7295ZM22.999 0V2C34.6193 2 43.999 11.3033 43.999 22.7295H45.999H47.999C47.999 9.04968 36.7837 -2 22.999 -2V0ZM45.999 22.7295L43.999 22.7295C43.9989 31.4535 38.5347 38.9374 30.7688 41.9923L31.501 43.8535L32.2331 45.7147C41.455 42.087 47.9989 33.1754 47.999 22.7295L45.999 22.7295ZM31.501 43.8535L29.7913 42.8157L23.0013 54.0012L24.7109 55.0391L26.4206 56.0769L33.2106 44.8913L31.501 43.8535ZM24.7109 55.0391L23.0014 54.0011L23.0006 54.0011L21.291 55.0391L19.5814 56.077C21.139 58.6425 24.8629 58.6425 26.4205 56.077L24.7109 55.0391ZM21.291 55.0391L23.0006 54.0011L16.2106 42.8175L14.501 43.8555L12.7914 44.8934L19.5814 56.077L21.291 55.0391ZM14.501 43.8555L15.2328 41.9942C7.46543 38.9401 2.0001 31.4548 2 22.7295L0 22.7295L-2 22.7295C-1.99988 33.1767 4.54516 42.0899 13.7691 45.7168L14.501 43.8555ZM0 22.7295H2C2 11.3033 11.379 2.0002 22.9991 2L22.999 0L22.999 -2C9.21442 -1.99977 -2 9.04989 -2 22.7295H0Z"
							fill="url(#paint0_linear_1644_647)"
							fill-opacity="0.2"
							mask="url(#path-2-inside-1_1644_647)"
						/>
						<path
							d="M22.7403 8.05957C30.8166 8.16594 36.7715 14.2653 36.9842 21.6552C37.209 29.4826 30.9972 36.0516 22.8066 36.0597C19.0514 35.9091 15.7799 34.6026 13.1106 31.9292C10.3349 29.1515 8.95804 25.7495 9.01022 21.8499C9.06039 18.1108 10.4432 14.8494 13.1066 12.188C15.8281 9.47051 19.1558 8.16594 22.7403 8.05957ZM25.506 19.4976C25.5602 19.5197 25.5983 19.5378 25.6385 19.5518C26.7042 19.9532 27.4247 20.7039 27.7699 21.7756C28.2316 23.2066 27.9947 24.5754 27.2461 25.8579C26.7142 26.7711 25.8873 27.3451 24.936 27.7646C23.5853 28.3607 22.1583 28.5754 20.7012 28.5875C18.2345 28.6096 15.7679 28.5935 13.3033 28.5955C13.2531 28.5955 13.1869 28.5654 13.1567 28.6196C13.1327 28.6658 13.1889 28.7059 13.215 28.742C13.7247 29.4846 14.3048 30.169 14.9711 30.7772C16.643 32.2965 18.5858 33.2799 20.8096 33.7014C22.6099 34.0446 24.3921 33.9623 26.1603 33.4846C26.2807 33.4525 26.2988 33.4164 26.2486 33.302C25.7067 32.0597 25.1668 30.8153 24.6329 29.5689C24.5185 29.3 24.374 29.0451 24.3058 28.7541C24.2777 28.6316 24.3339 28.6176 24.4102 28.5935C24.926 28.4269 25.4157 28.2041 25.8894 27.9452C26.0941 27.8349 26.0941 27.8348 26.1924 28.0416C26.1984 28.0556 26.2045 28.0717 26.2105 28.0857C26.5918 28.9909 26.9711 29.8961 27.3525 30.8012C27.4488 31.028 27.5472 31.2528 27.6596 31.5117C27.7378 31.311 27.8021 31.1485 27.8663 30.9859C28.5828 29.1414 29.3073 27.299 30.0158 25.4505C30.4272 24.3747 31.1478 23.6321 32.2577 23.2869C32.627 23.1725 33.0043 23.1264 33.3916 23.1685C33.4559 23.1765 33.4599 23.2066 33.4438 23.2548C33.4298 23.2949 33.4137 23.3351 33.3977 23.3732C32.2838 26.0606 31.1699 28.748 30.058 31.4355C30.0379 31.4856 29.9957 31.5338 30.0218 31.596C34.5758 28.3426 36.5045 21.6994 33.2612 16.1158C30.0319 10.5583 23.7298 9.34206 19.6314 10.7269C21.0002 10.7269 22.353 10.7209 23.7057 10.7289C24.5185 10.7329 25.3153 10.8453 26.076 11.1424C26.9149 11.4695 27.6435 11.9472 28.1593 12.7058C28.5928 13.3441 28.7755 14.0586 28.8036 14.8213C28.8718 16.6657 28.1011 18.0566 26.5356 19.02C26.2145 19.2147 25.8673 19.3531 25.506 19.4976ZM24.936 25.0591C25.2431 24.7099 25.4338 24.3266 25.5381 23.9011C25.7167 23.1745 25.6706 22.4801 25.227 21.8479C24.936 21.4344 24.5226 21.1695 24.075 20.9507C24.0027 20.9146 23.9405 20.8805 23.9064 20.7942C23.5953 20.0496 23.2802 19.309 22.9671 18.5664C22.9049 18.4179 22.929 18.3837 23.0976 18.3677C23.4548 18.3316 23.8061 18.2713 24.1533 18.175C24.6691 18.0325 25.1427 17.8057 25.5622 17.4705C26.1463 17.0009 26.3871 16.3627 26.4694 15.6421C26.6018 14.4881 26.0941 13.6231 25.0223 13.2116C24.5085 13.0129 23.9666 12.9367 23.4187 12.9347C21.5782 12.9286 19.7378 12.9326 17.8974 12.9306C17.801 12.9306 17.7709 12.9628 17.7569 13.0551C17.7207 13.3039 17.6766 13.5508 17.6324 13.7977C17.3715 15.2809 17.1106 16.7641 16.8477 18.2453C16.8256 18.3657 16.8497 18.4018 16.9801 18.4018C17.5802 18.3958 18.1783 18.4058 18.7784 18.3958C18.9611 18.3918 19.0634 18.468 19.1317 18.6246C19.3745 19.1886 19.6194 19.7505 19.8622 20.3145C19.9325 20.4771 19.9305 20.4771 19.7519 20.4771C18.7142 20.4771 17.6766 20.4811 16.6389 20.4731C16.4944 20.4731 16.4483 20.5172 16.4242 20.6537C16.3279 21.2377 16.2195 21.8218 16.1151 22.4038C15.8843 23.6863 15.6575 24.9688 15.4207 26.2493C15.3926 26.3998 15.4227 26.438 15.5792 26.4359C17.3555 26.4299 19.1317 26.436 20.9079 26.4319C21.6164 26.4299 22.3148 26.3456 22.9992 26.159C23.1136 26.1289 23.1337 26.0968 23.0855 25.9884C22.4272 24.4771 21.7709 22.9618 21.1146 21.4485C20.1693 19.2628 19.224 17.0772 18.2787 14.8915C18.1944 14.6968 18.1964 14.6888 18.4112 14.7049C19.5632 14.7992 20.4784 15.307 21.1427 16.2563C21.4598 16.7079 21.6284 17.2297 21.8412 17.7274C22.7825 19.9432 23.7137 22.163 24.649 24.3808C24.7413 24.6035 24.8357 24.8223 24.936 25.0591ZM12.7252 27.9452C12.7774 27.7927 15.3484 13.1695 15.3484 13.039C11.234 16.3346 9.71067 22.8052 12.7252 27.9452Z"
							fill="white"
						/>
						<defs>
							<linearGradient id="paint0_linear_1644_647" x1="22.999" y1="0" x2="22.999" y2="56.0011" gradientUnits="userSpaceOnUse">
								<stop offset="0.17354" stop-color="white" />
								<stop offset="0.66057" stop-color="white" stop-opacity="0" />
							</linearGradient>
						</defs>
					</svg>
				</a>
			</div>
		</div>
	</Modal>
</template>

<script setup lang="ts">
const value = defineModel<boolean>('modelValue', { required: true })

const props = defineProps<{
	branch: any
}>()

// Computed properties
const mapLink = computed(
	() => `https://yandex.ru/maps/?ll=${props.branch.longitude},${props.branch.latitude}&z=16&l=map&pt=${props.branch.longitude},${props.branch.latitude},pm2rdm`
)
</script>
